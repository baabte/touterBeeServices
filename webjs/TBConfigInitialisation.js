function fnTbInitialisation(){var a;loadTBeeConfig(function(e){if(Object.keys(e).length!=0){var b=e[0].tbObj;var g;var c={};for(key in b){var d=b[key];for(key2 in d.pageData){if(d.pageData[key2].currentPage==window.location.href){for(key3 in d.pageData[key2].configDataObj){var f=d.pageData[key2].configDataObj[key3].eventType;var i=d.pageData[key2].configDataObj[key3].elementId;var h=document.getElementById(i);c[i]=d.pageData[key2].configDataObj[key3];h.addEventListener(f,function(j){setTimeout(function(){if(!inIframe()){activateSocialFeature(c[j.target.id])}},0)})}}}}}})}setTimeout(function(){var a;fnTbInitialisation()},3000);function hashHandler(){this.oldHash=window.location.hash;this.Check;var b=this;var a=function(){if(b.oldHash!=window.location.hash){setTimeout(function(){fnTbInitialisation()},3000);b.oldHash=window.location.hash}};this.Check=setInterval(function(){a()},100)}var hashDetection=new hashHandler();function inIframe(){try{return window.self!==window.top}catch(a){return true}}window.parent.postMessage(JSON.parse(JSON.stringify({message:"loadJSsuccess",currentPage:window.location.href})),"*");revStr="";elemArr=[];outcome={};function receiveMessage(a){if(a.origin=="http://touterbee.com"){document.addEventListener("click",fnClickFreeze);if(a.data=="freeze"){document.addEventListener("click",fnClickFreeze)}else{if(a.data=="unfreeze"){document.removeEventListener("click",fnClickFreeze)}}}}function fnClickFreeze(a){a.preventDefault();outcome.id=a.target.id;outcome.name=a.target.name;outcome.type=a.target.type;outcome.currentPage=window.location.href;window.parent.postMessage(JSON.parse(JSON.stringify(outcome)),"*");return false}function loadTBeeConfig(d){var b;var a={};var c;if(window.XMLHttpRequest){c=new XMLHttpRequest()}else{if(window.ActiveXObject){c=new ActiveXObject("Msxml2.XMLHTTP")}}c.open("POST","http://services.touterbee.com/FnLoadTBeeConfig/",true);c.setRequestHeader("content-type","application/json");c.setRequestHeader("Accept","application/json");c.responseType="json";c.onreadystatechange=function(){if(c.readyState==4&&c.status==200){a=JSON.parse(c.response);d(a)}};c.send(JSON.stringify({domainName:"http://services.touterbee.com"}))}function activateSocialFeature(e){var h;var d=e.content;if(d!=undefined){var k=d.toDOM().children;var g="";for(var f=0;f<k.length;f++){if(k[f].tagName.trim()=="SPAN"){if(k[f].innerText.indexOf("#")>=1){var c=k[f].innerText;var b=c.substring(c.indexOf("#")+1,c.length);var j=document.getElementById(b);if(j.getAttribute("type")=="text"){d=d.replace(new RegExp(c,"g"),j.value)}}}}e.content=d}var a;if(window.XMLHttpRequest){a=new XMLHttpRequest()}else{if(window.ActiveXObject){a=new ActiveXObject("Msxml2.XMLHTTP")}}a.open("POST","http://services.touterbee.com/FnActivateEvent/",true);a.setRequestHeader("content-type","application/json");a.setRequestHeader("Accept","application/json");a.onreadystatechange=function(){if(a.readyState==4&&a.status==200){var i=JSON.parse(a.responseText)}};a.send(JSON.stringify({inputObj:e}))}String.prototype.toDOM=function(){var g=document,f,e=g.createElement("div"),c=g.createDocumentFragment();e.innerHTML=this;while(f=e.firstChild){c.appendChild(f)}return c};function spanToArray(b){var c=[];var d=b.children;for(var a=0;a<d.length;a++){if(d[a].tagName=="SPAN"){if(d[a].innerText.indexOf("#")==1){c.push(d[a])}}}return c}window.addEventListener("message",receiveMessage);